# volatile关键字

　一旦一个共享变量（类的成员变量、类的静态成员变量）被volatile修饰之后，那么就具备了两层语义：

　　1）保证了不同线程对这个变量进行操作时的可见性，即一个线程修改了某个变量的值，这新值对其他线程来说是立即可见的。即对临界区的修改可以马上被其他线程看到,即线程可以发现其他线程对临界区数据的修改。

　　2）禁止进行指令重排序。



# CAS算法

要讲cas算法就要讲无锁

1. 什么是无锁

   相对于线程加锁来保证线程访问临界区的安全访问这种悲观策略。 无锁是一种相对乐观的策略，他认为对临界区的访问不存在冲突，无需阻塞。

2. 无锁的时候多线程共同访问临界区的资源怎么办？

   无锁就是通过CAS比较交换技术来鉴别线程冲突。一旦检测到有异常就会重试当前操作，直到没有异常为止。


CAS的原理

1. 具体内容

   一个CAS方法包含三个参数CAS(V,E,N)。V表示要更新的变量，E表示预期的值，N表示新值。只有当V的值等于E时，才会将V的值修改为N。如果V的值不等于E，说明已经被其他线程修改了，当前线程可以放弃此操作，也可以再次尝试次操作直至修改成功。基于这样的算法，CAS操作即使没有锁，也可以发现其他线程对当前线程的干扰（临界区值的修改），并进行恰当的处理

   说人话就是：CAS算法会在一个线程视图操作临界区变量的值的时候判断一下要修改的值是否是我们需要的预期的值，即它是否被其他的线程给修改了。 否则就重试，直至成功。 CAS算法是cpu指令级的原子操作(避免了异常)。
